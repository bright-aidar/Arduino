const int thermistorPin1 = A0;
const int thermistorPin2 = A1;
const int seriesResistor = 10000;

// Параметры для NTC термистора 10кОм
const int nominalResistance = 10000;  // 10кОм при 25°C
const int nominalTemp = 25;           // 25°C
const int bCoefficient = 3950;        // Бета-коэффициент

float readTemperature(int pin) {
  int rawValue = analogRead(pin);
  
  // ПРАВИЛЬНАЯ формула для NTC термистора
  float voltage = rawValue * (5.0 / 1023.0);
  float resistance = seriesResistor * (5.0 - voltage) / voltage;
  
  // Формула Стейнхарта-Харта
  float steinhart;
  steinhart = resistance / nominalResistance;     // (R/Ro)
  steinhart = log(steinhart);                     // ln(R/Ro)
  steinhart /= bCoefficient;                      // 1/B * ln(R/Ro)
  steinhart += 1.0 / (nominalTemp + 273.15);      // + (1/To)
  steinhart = 1.0 / steinhart;                    // Инвертируем
  steinhart -= 273.15;                            // Преобразуем в Цельсии
  
  return steinhart;
}

void setup() {
  Serial.begin(9600);
  Serial.println("Чтение двух NTC термисторов...");
}

void loop() {
  float temp1 = readTemperature(thermistorPin1);
  float temp2 = readTemperature(thermistorPin2);
  
  Serial.print("Датчик 1: ");
  Serial.print(temp1);
  Serial.print("°C  |  Датчик 2: ");
  Serial.print(temp2);
  Serial.println("°C");
  
  delay(1000);
}
